## 优化计划

### 1. 重构代码结构
- 将主执行代码放入 `if __name__ == "__main__":` 块中
- 将 HTML 模板提取到单独的 `templates/index.html` 文件
- 添加类型注解和文档字符串

### 2. 消除重复代码
- 合并 `get_stock_data` 和 `get_index_data` 的通用逻辑
- 合并 `get_hs300_data` 和 `get_zz1000_data` 为通用函数
- 合并 `create_hs300_chart` 和 `create_zz1000_chart` 为通用函数
- 提取图表HTML读取的重复逻辑

### 3. 改进异常处理
- 使用更具体的异常类型
- 统一管理默认值配置
- 添加日志记录替代 print 语句

### 4. 提高可读性
- 定义常量（MA60_WINDOW、BOLLINGER_WINDOW、STD_MULTIPLIER等）
- 改进变量命名
- 添加函数文档字符串

### 5. 配置管理
- 创建配置类或配置文件管理股票/指数代码
- 集中管理文件路径

### 6. 性能优化
- 考虑使用并发请求获取多个指数数据
- 优化 API 调用逻辑

### 7. 清理导入语句
- 移除重复的 plotly 导入